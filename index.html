<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Calculadora de Quinhão</title>

<style>
body{
    font-family: Arial, sans-serif;
    background-color: #f4f6f9;
    padding: 20px;
}

.wrapper{
    display: flex;
    justify-content: center;
    gap: 30px;
    flex-wrap: wrap;
}

.container{
    background: white;
    padding: 25px;
    border-radius: 10px;
    width: 420px;
    box-shadow: 0px 0px 15px rgba(0,0,0,0.1);
}

h2{
    text-align: center;
}

.logo{
    width: 100px;
    display: block;
    margin: 0 auto 10px auto;
}

input, select{
    width: 95%;
    padding: 8px;
    margin: 6px 0;
    border-radius: 5px;
    border: 1px solid #ccc;
}

button{
    background-color: #003366;
    color: white;
    padding: 10px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    width: 100%;
}

button:hover{
    background-color: #0055aa;
}

.resultado{
    margin-top: 15px;
    font-weight: bold;
    color: #003366;
}

.hidden{
    display: none;
}
</style>
</head>

<body>

<div class="wrapper">

<!-- FORMULÁRIO 1 -->
<div class="container">

<img src="logo.png" class="logo">

<h2>Cálculo do Quinhão</h2>

<label>Valor Total</label>
<input type="text" id="valor" oninput="formatarMoeda(this)">

<label>Forma</label>
<select id="modo" onchange="alterarModo()">
<option value="fracao">Fração</option>
<option value="porcentagem">Porcentagem</option>
</select>

<div id="areaFracao">
<label>Numerador</label>
<input type="number" id="numerador">

<label>Denominador</label>
<input type="number" id="denominador">
</div>

<div id="areaPorcentagem" class="hidden">
<label>Porcentagem (%)</label>
<input type="number" id="porcentagem" step="0.01">
</div>

<button onclick="calcular()">Calcular</button>
<div class="resultado" id="resultado"></div>

</div>


<!-- FORMULÁRIO 2 -->
<div class="container">

<img src="logo.png" class="logo">

<h2>Cálculo Inverso</h2>

<label>Valor Total</label>
<input type="text" id="valorTotal2" oninput="formatarMoeda(this)">

<label>Valor da Parte</label>
<input type="text" id="valorParte" oninput="formatarMoeda(this)">

<button onclick="calcularInverso()">Calcular</button>

<div class="resultado" id="resultado2"></div>

</div>

</div>

<script>

// Alternar entre fração e porcentagem
function alterarModo(){
    let modo = document.getElementById("modo").value;

    if(modo === "fracao"){
        document.getElementById("areaFracao").classList.remove("hidden");
        document.getElementById("areaPorcentagem").classList.add("hidden");
    }else{
        document.getElementById("areaFracao").classList.add("hidden");
        document.getElementById("areaPorcentagem").classList.remove("hidden");
    }
}

// Formatar moeda automaticamente
function formatarMoeda(campo) {
    let valor = campo.value.replace(/\D/g, "");

    valor = (valor / 100).toFixed(2) + "";
    valor = valor.replace(".", ",");

    valor = valor.replace(/\B(?=(\d{3})+(?!\d))/g, ".");

    campo.value = "R$ " + valor;
}

// Converter moeda formatada para número
function converterValor(id){
    let valor = document.getElementById(id).value
                .replace("R$ ","")
                .replace(/\./g,"")
                .replace(",",".");
    return parseFloat(valor);
}

// Cálculo normal
function calcular(){
    let valor = converterValor("valor");
    let modo = document.getElementById("modo").value;
    let resultado = 0;

    if(!valor){
        alert("Informe o valor total!");
        return;
    }

    if(modo === "fracao"){
        let n = parseFloat(document.getElementById("numerador").value);
        let d = parseFloat(document.getElementById("denominador").value);

        if(!n || !d){
            alert("Preencha numerador e denominador!");
            return;
        }

        resultado = valor * (n/d);

    }else{
        let p = parseFloat(document.getElementById("porcentagem").value);

        if(!p){
            alert("Informe a porcentagem!");
            return;
        }

        resultado = valor * (p/100);
    }

    document.getElementById("resultado").innerHTML =
        "Resultado: " + resultado.toLocaleString("pt-BR",{style:"currency",currency:"BRL"});
}


// Cálculo inverso
function calcularInverso(){
    let total = converterValor("valorTotal2");
    let parte = converterValor("valorParte");

    if(!total || !parte){
        alert("Preencha ambos os valores!");
        return;
    }

    let porcentagem = (parte / total) * 100;

    let numerador = parte;
    let denominador = total;

    function mdc(a,b){
        return b ? mdc(b, a % b) : a;
    }

    let divisor = mdc(numerador, denominador);

    numerador /= divisor;
    denominador /= divisor;

    document.getElementById("resultado2").innerHTML =
        "Porcentagem: " + porcentagem.toFixed(2) + "%<br>" +
        "Fração equivalente: " + Math.round(numerador) + "/" + Math.round(denominador);
}

</script>

</body>
</html>
